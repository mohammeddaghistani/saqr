<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุฅุฏุงุฑุฉ ุงููุธุงู - ุตูุฑ ุงูุจูุฏ ุงูุฃููู</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="watermark"></div>
<header>
    <span>๐ค ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</span>
    <button class="btn-gold" style="width:auto; padding:5px 15px;" onclick="location.href='home.html'">ุนููุฏุฉ</button>
</header>

<div class="container" style="padding:25px; max-width:600px; margin:0 auto;">
    <div class="glass-card">
        <label>ุงูุฑูู ุงููุธููู</label>
        <input type="text" id="newID">
        <label>ุงุณู ุงูููุธู</label>
        <input type="text" id="newName">
        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฅุฑุณุงู OTP)</label>
        <input type="email" id="newEmail">
        <label>ุงูุฑุชุจุฉ</label>
        <select id="newRole">
            <option value="user">ููุธู ููุฏุงูู</option>
            <option value="admin">ูุฏูุฑ ูุธุงู</option>
            <option value="ceo">ููุงุฏู</option>
        </select>
        <button class="btn-gold" id="addBtn" onclick="addUser()">ุฅุถุงูุฉ ุงูููุธู ุงูุขู</button>
    </div>
</div>

<script>
    const API = "https://script.google.com/macros/s/AKfycbxrpX6dgTBClMpXdIrklgCGMjCDAC_KqoDbo5li8qsT6c3VH_NeWUKorN9NCzv1ud2S/exec";

    async function addUser() {
        const btn = document.getElementById('addBtn');
        const data = {
            action: 'addUser',
            newID: document.getElementById('newID').value,
            newName: document.getElementById('newName').value,
            newEmail: document.getElementById('newEmail').value,
            newRole: document.getElementById('newRole').value
        };

        if (!data.newID || !data.newName || !data.newEmail) return alert("ูุฑุฌู ุฅููุงู ูุงูุฉ ุงูุจูุงูุงุช");

        btn.disabled = true;
        btn.innerText = "ุฌุงุฑู ุงูุฅุถุงูุฉ...";
        
        try {
            const res = await fetch(API, { method: 'POST', body: JSON.stringify(data) }).then(r => r.json());
            if (res.success) {
                alert("โ ุชู ุฅุถุงูุฉ ุงูููุธู ุจูุฌุงุญ");
                location.reload();
            }
        } catch (e) { alert("ูุดู ุงูุงุชุตุงู"); }
        btn.disabled = false;
    }
</script>
</body>
</html>
