<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุฅุถุงูุฉ ุณุฌู - ุตูุฑ</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="watermark"></div>
    <header>
        <img src="logo.png" class="logo-header">
        <button class="btn-gold" style="width:auto; padding:8px 15px;" onclick="location.href='home.html'">โฌ๏ธ ุนูุฏุฉ</button>
    </header>
    <div style="padding:20px; max-width:500px; margin:auto;">
        <div class="glass-card">
            <h3 style="color:var(--gold)">๐ ุฅุถุงูุฉ ุณุฌู ุฌุฏูุฏ</h3>
            <label>ูุฆุฉ ุงูุนูู</label>
            <select id="cat">
                <option value="ููุฏุงูู">ุฒูุงุฑุฉ ููุฏุงููุฉ</option>
                <option value="ุฅุฏุงุฑู">ุนูู ููุชุจ</option>
                <option value="ุชุจุฑุน">ุงุณุชูุงู ุชุจุฑุน</option>
            </select>
            <label>ุงููุจูุบ (ุฅู ูุฌุฏ)</label>
            <input type="number" id="amt" placeholder="0.00">
            <label>ุงูุชูุงุตูู</label>
            <textarea id="note" rows="4" placeholder="ุงูุชุจ ุงูููุงุญุธุงุช ููุง..."></textarea>
            <button class="btn-gold" id="s-btn" onclick="save()">ุญูุธ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู</button>
        </div>
    </div>
    <script>
        const API = "https://script.google.com/macros/s/AKfycbzPMNYU_Q0nTlF8OI6Js4NfXbKjre4I5YspWlg8OdJMa7O1_IZiNjZsvqdfjaPsz46o/exec";
        async function save() {
            const btn = document.getElementById('s-btn');
            const data = { 
                action:'addRecord', 
                empID:sessionStorage.getItem('empID'), 
                empName:sessionStorage.getItem('userName'), 
                category:document.getElementById('cat').value, 
                amount:document.getElementById('amt').value, 
                notes:document.getElementById('note').value 
            };
            
            if(!data.notes) return alert("ูุฑุฌู ูุชุงุจุฉ ุงูููุงุญุธุงุช");
            
            btn.disabled = true; btn.innerText = "โณ ุฌุงุฑู ุงูุญูุธ...";
            const res = await fetch(API, {method:'POST', body:JSON.stringify(data)}).then(r=>r.json());
            if(res.success) {
                alert("โ ุชู ุงูุญูุธ ุจูุฌุงุญ");
                location.href="home.html";
            } else {
                alert("ุฎุทุฃ: " + res.msg);
                btn.disabled = false; btn.innerText = "ุญูุธ ุงูุจูุงูุงุช";
            }
        }
    </script>
</body>
</html>
